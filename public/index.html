<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>üéØ L√¥ T√¥ Online</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700;800&family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <!-- ============================== -->
    <!-- SCREEN: HOME                   -->
    <!-- ============================== -->
    <div id="screen-home" class="screen active">
      <div class="home-container">
        <div class="logo-section">
          <div class="logo-icon">üéØ</div>
          <h1 class="logo-title">L√î T√î</h1>
          <p class="logo-subtitle">Ch∆°i c√πng b·∫°n b√®</p>
        </div>

        <div class="home-actions">
          <!-- Create Room -->
          <div class="action-card">
            <h2>üè† T·∫°o ph√≤ng</h2>
            <div class="form-group">
              <label for="host-name">T√™n c·ªßa b·∫°n</label>
              <input
                type="text"
                id="host-name"
                placeholder="Nh·∫≠p t√™n..."
                maxlength="20"
                autocomplete="off"
              />
            </div>
            <div class="form-group">
              <label>S·ªë v√© m·ªói ng∆∞·ªùi</label>
              <div class="ticket-selector">
                <button class="ticket-btn" data-count="1">1</button>
                <button class="ticket-btn" data-count="2">2</button>
                <button class="ticket-btn active" data-count="3">3</button>
                <button class="ticket-btn" data-count="4">4</button>
                <button class="ticket-btn" data-count="5">5</button>
              </div>
            </div>
            <div class="form-group">
              <label>Th·ªùi gian quay s·ªë</label>
              <div class="ticket-selector">
                <button class="spin-btn" data-spin="1">1s</button>
                <button class="spin-btn" data-spin="2">2s</button>
                <button class="spin-btn active" data-spin="3">3s</button>
                <button class="spin-btn" data-spin="5">5s</button>
              </div>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="host-plays" checked />
                <span class="checkmark"></span>
                Host c≈©ng ch∆°i
              </label>
            </div>
            <button class="btn btn-primary" id="btn-create">T·∫°o ph√≤ng</button>
          </div>

          <div class="divider"><span>Ph√≤ng ƒëang m·ªü</span></div>

          <!-- Room Browser -->
          <div class="action-card" id="card-rooms">
            <h2>üéÆ Tham gia</h2>
            <div class="form-group">
              <label for="player-name">T√™n c·ªßa b·∫°n</label>
              <input
                type="text"
                id="player-name"
                placeholder="Nh·∫≠p t√™n..."
                maxlength="20"
                autocomplete="off"
              />
            </div>
            <div class="room-browser" id="room-browser">
              <div class="room-empty" id="room-empty">
                <p>üò¥ Ch∆∞a c√≥ ph√≤ng n√†o</p>
                <p class="sub">H√£y t·∫°o ph√≤ng ƒë·∫ßu ti√™n!</p>
              </div>
              <div class="room-list-items" id="room-list-items"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================== -->
    <!-- SCREEN: LOBBY                  -->
    <!-- ============================== -->
    <div id="screen-lobby" class="screen">
      <div class="lobby-container">
        <div class="room-header">
          <div class="room-code-display">
            <span class="label">M√£ ph√≤ng</span>
            <span class="code" id="lobby-room-code">----</span>
          </div>
          <div class="room-info" id="lobby-info"></div>
        </div>
        <div class="players-section">
          <h3>üë• Ng∆∞·ªùi ch∆°i (<span id="player-count">0</span>)</h3>
          <ul id="player-list"></ul>
        </div>
        <div id="lobby-host-actions" class="host-actions" style="display: none">
          <button class="btn btn-primary btn-large" id="btn-start">
            üé≤ B·∫Øt ƒë·∫ßu ch∆°i!
          </button>
        </div>
        <div id="lobby-player-msg" class="waiting-msg" style="display: none">
          <div class="spinner"></div>
          <p>Ch·ªù host b·∫Øt ƒë·∫ßu...</p>
        </div>
      </div>
    </div>

    <!-- ============================== -->
    <!-- SCREEN: GAME                   -->
    <!-- ============================== -->
    <div id="screen-game" class="screen">
      <div class="game-container">
        <!-- Top bar -->
        <div class="game-topbar">
          <div class="room-badge" id="game-room-code">----</div>
          <div class="drawn-counter"><span id="drawn-count">0</span>/90</div>
          <button class="btn-icon" id="btn-menu" title="Menu">‚ò∞</button>
        </div>

        <!-- Drawn numbers (only shows drawn ones) -->
        <div class="drawn-numbers-section">
          <h4>S·ªë ƒë√£ ra (<span id="drawn-total">0</span>)</h4>
          <div class="drawn-list" id="drawn-list"></div>
        </div>

        <!-- Player tickets (scrollable) -->
        <div id="player-tickets" style="display: none">
          <h4 class="tickets-header">üé´ V√© c·ªßa b·∫°n</h4>
          <div class="tickets-scroll" id="tickets-scroll"></div>
          <div class="player-actions-row">
            <button class="btn btn-near-loto" id="btn-near-loto">
              ‚ö†Ô∏è S·∫Øp L√¥ T√¥
            </button>
            <button class="btn btn-loto" id="btn-claim">üéâ H√î L√î T√î!</button>
          </div>
        </div>
      </div>

      <!-- Host controls (sticky bottom bar) -->
      <div
        id="host-controls"
        class="host-controls-sticky"
        style="display: none"
      >
        <button class="btn btn-draw" id="btn-draw">üé≤ QUAY S·ªê</button>
        <div class="host-controls-row">
          <button class="btn btn-board" id="btn-number-board">
            üìä B·∫£ng s·ªë
          </button>
          <button class="btn btn-reset" id="btn-reset-game">üîÑ V√°n m·ªõi</button>
        </div>
      </div>
    </div>

    <!-- ============================== -->
    <!-- OVERLAY: Spin Animation        -->
    <!-- ============================== -->
    <div id="overlay-spin" class="overlay overlay-spin" style="display: none">
      <div class="overlay-content spin-popup">
        <div
          class="spin-near-loto"
          id="spin-near-loto"
          style="display: none"
        ></div>
        <div class="spin-reel" id="spin-reel">
          <div class="spin-number" id="spin-number">?</div>
        </div>
        <div class="spin-label" id="spin-label">ƒêang quay...</div>
      </div>
    </div>

    <!-- ============================== -->
    <!-- OVERLAY: Near Loto Alert       -->
    <!-- ============================== -->
    <div id="overlay-near-loto" class="overlay" style="display: none">
      <div class="overlay-content near-loto-announcement">
        <div class="near-loto-emoji">‚ö†Ô∏èüî•</div>
        <h2 id="near-loto-player">---</h2>
        <p>s·∫Øp L√î T√î!</p>
        <div class="near-loto-numbers" id="near-loto-numbers"></div>
        <p class="near-loto-sub">S·ªë c√≤n thi·∫øu</p>
        <button class="btn btn-primary" id="btn-close-near-loto">OK</button>
      </div>
    </div>

    <!-- ============================== -->
    <!-- OVERLAY: Loto Claim            -->
    <!-- ============================== -->
    <div id="overlay-loto" class="overlay" style="display: none">
      <div class="overlay-content loto-announcement">
        <div class="loto-emoji">üéâüéäüéØ</div>
        <h2 id="loto-player-name">---</h2>
        <p>h√¥ L√î T√î!</p>
        <button class="btn btn-primary" id="btn-close-loto">OK</button>
      </div>
    </div>

    <!-- ============================== -->
    <!-- OVERLAY: Number Board (Host)   -->
    <!-- ============================== -->
    <div id="overlay-board" class="overlay" style="display: none">
      <div class="overlay-content board-content">
        <h3>üìä B·∫£ng s·ªë (1-90)</h3>
        <div class="number-board" id="number-board"></div>
        <button class="btn btn-secondary" id="btn-close-board">ƒê√≥ng</button>
      </div>
    </div>

    <!-- ============================== -->
    <!-- OVERLAY: Menu                  -->
    <!-- ============================== -->
    <div id="overlay-menu" class="overlay" style="display: none">
      <div class="overlay-content menu-content">
        <h3>‚öôÔ∏è Menu</h3>
        <button class="btn btn-danger" id="btn-leave">üö™ R·ªùi ph√≤ng</button>
        <button class="btn btn-secondary" id="btn-close-menu">ƒê√≥ng</button>
      </div>
    </div>

    <!-- TOAST -->
    <div id="toast-container"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/app.js"></script>
  </body>
</html>
